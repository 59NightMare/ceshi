{"version":3,"sources":["webpack:///./src/views/rank.vue?fbd9","webpack:///src/views/rank.vue","webpack:///./src/views/rank.vue?4236","webpack:///./src/views/rank.vue?74c5","webpack:///./src/views/rank.vue?5740"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","_l","item","key","id","attrs","coverImgUrl","index","_v","_s","ar","staticRenderFns","data","playList","list","loading","num","components","headerNav","beforeRouteEnter","next","vm","getPlaylistDetailFun","splice","methods","onLoad","length","created","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,cAAcA,EAAG,MAAM,CAACE,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOT,EAAU,OAAEU,WAAW,WAAWC,YAAY,WAAW,CAACX,EAAIY,GAAIZ,EAAQ,MAAE,SAASa,GAAM,OAAOT,EAAG,MAAM,CAACU,IAAID,EAAKE,GAAGJ,YAAY,QAAQ,CAACP,EAAG,cAAc,CAACO,YAAY,MAAMK,MAAM,CAAC,IAAM,MAAM,GAAK,qBAAuBH,EAAKE,KAAK,CAACX,EAAG,MAAM,CAACY,MAAM,CAAC,IAAMH,EAAKI,YAAY,IAAM,QAAQb,EAAG,KAAKJ,EAAIY,GAAIC,EAAW,QAAE,SAASC,EAAII,GAAO,OAAOd,EAAG,KAAK,CAACE,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOS,EAAQ,EAAGR,WAAW,cAAcI,IAAIA,EAAIC,IAAI,CAACf,EAAImB,GAAG,IAAInB,EAAIoB,GAAGF,EAAQ,GAAG,IAAIlB,EAAIoB,GAAGN,EAAIP,MAAM,IAAIP,EAAIoB,GAAGN,EAAIO,GAAG,GAAGd,MAAM,UAAS,IAAI,MAAKH,EAAG,IAAI,CAACE,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOT,EAAW,QAAEU,WAAW,aAAa,CAACV,EAAImB,GAAG,YAAY,IAAI,IACj1BG,EAAkB,G,oCC6BtB,GACEC,KADF,WAEI,MAAO,CACLC,SAAU,GACVC,KAAM,GACNC,SAAS,EACTC,IAAK,IAGTC,WAAY,CACVC,UAAJ,QAGEC,iBAbF,SAaA,OAII,OAAJ,OAAI,GAAJ,kBAGMC,GAAK,SAAX,GACQC,EAAGR,SAAWD,EAAKE,KAEnBO,EAAGC,qBAAqBD,EAAGR,SAASU,OAAO,EAAG,WAIpDC,QAAS,CAEPF,qBAFJ,SAEA,GACM,IADN,WACA,oBACQ,IAAR,UAGQ,OAAR,OAAQ,CAAR,0BAEU,EAAV,2BA6BIG,OAtCJ,WAuCUnC,KAAKuB,SAASa,OAChBpC,KAAKgC,qBAAqBhC,KAAKuB,SAASU,OAAO,EAAG,IAElDjC,KAAKyB,SAAb,IAKEY,QA1EF,cC9B8U,I,wBCQ1UC,EAAY,eACd,EACAxC,EACAuB,GACA,EACA,KACA,KACA,MAIa,aAAAiB,E,oECnBf","file":"js/chunk-46d4a4fc.8d883f10.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('header-nav'),_c('div',{directives:[{name:\"swipeup\",rawName:\"v-swipeup\",value:(_vm.onLoad),expression:\"onLoad\"}],staticClass:\"toplist\"},[_vm._l((_vm.list),function(item){return _c('div',{key:item.id,staticClass:\"item\"},[_c('router-link',{staticClass:\"img\",attrs:{\"tag\":\"div\",\"to\":'/rank/ranklist?id=' + item.id}},[_c('img',{attrs:{\"src\":item.coverImgUrl,\"alt\":\"\"}})]),_c('ul',_vm._l((item.tracks),function(key,index){return _c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(index < 3),expression:\"index < 3\"}],key:key.id},[_vm._v(\" \"+_vm._s(index + 1)+\".\"+_vm._s(key.name)+\"-\"+_vm._s(key.ar[0].name)+\" \")])}),0)],1)}),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}]},[_vm._v(\"没有更多了\")])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- 顶部组件 -->\n    <header-nav></header-nav>\n    <div class=\"toplist\" v-swipeup=\"onLoad\">\n      <div class=\"item\" v-for=\"item in list\" :key=\"item.id\">\n        <router-link tag=\"div\" :to=\"'/rank/ranklist?id=' + item.id\" class=\"img\">\n          <img :src=\"item.coverImgUrl\" alt=\"\" />\n        </router-link>\n        <ul>\n          <li\n            v-for=\"(key, index) in item.tracks\"\n            :key=\"key.id\"\n            v-show=\"index < 3\"\n          >\n            {{ index + 1 }}.{{ key.name }}-{{ key.ar[0].name }}\n          </li>\n        </ul>\n      </div>\n      <p v-show=\"loading\">没有更多了</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getToplist, getPlaylistDetail } from \"../api/rank\"; //\nimport headerNav from \"../components/base/headerNav.vue\";\n// import vueTouch from 'kim-vue-touch'\n\n// Vue.use(vueTouch)\nexport default {\n  data() {\n    return {\n      playList: [],\n      list: [],\n      loading: false,\n      num: 6,\n    };\n  },\n  components: {\n    headerNav,\n  },\n  // 路由中组件前路由守卫,提前请求数据\n  beforeRouteEnter(to, from, next) {\n    // console.log(\"beforeRouteEnter钩子\")\n    // 在导航完成前获取数据\n    // 请求第一个接口数据\n    getToplist().then((data) => {\n      // next();//保证请求数据执行完成后\n      // 直接指定methods数据方法,调用方法\n      next((vm) => {\n        vm.playList = data.list;\n        // vm.playList.splice(0,5)\n        vm.getPlaylistDetailFun(vm.playList.splice(0, 7));\n      });\n    });\n  },\n  methods: {\n    // 请求第二个接口\n    getPlaylistDetailFun(list) {\n      for (let i = 0; i < list.length; i++) {\n        let id = list[i].id;\n        // console.log(id);\n        // 第二接口\n        getPlaylistDetail({ id: id }).then((data) => {\n          // console.log(data);\n          this.list.push(data.playlist);\n        });\n      }\n    },\n\n    // 请求第二个接口\n    // getPlaylistDetailFun(list) {\n    //   console.log(list);\n\n    // },\n\n    // getToplistFun(){\n    //   // 第一接口\n    //   getToplist().then((data)=>{\n    //     // 请求网络速度过慢,页面已经渲染完成\n    //     // 实例化vue=>实例化vuerouter=>组件执行生命周期钩子\n    //     console.log(data);\n    //     for(let i = 0;i <30;i++){\n    //       let id = data.list[i].id;\n    //       // 第二接口\n    //       getPlaylistDetail({id:id}).then((data)=>{\n    //         console.log(data);\n    //         this.playList.push(data.playlist);\n    //       })\n    //     }\n    //     console.log(this.playList);\n    //   })\n\n    // },\n    onLoad() {\n      if (this.playList.length) {\n        this.getPlaylistDetailFun(this.playList.splice(0, 7));\n      }else{\n        this.loading=true\n      }\n    },\n  },\n\n  created() {\n    // console.log(\"created钩子\")\n    // this.getToplistFun();\n    // (async ()=>{\n    //   await\n    // })\n  },\n};\n</script>\n\n<style lang=\"less\">\n.toplist {\n  margin-top: 5px;\n  .item {\n    margin: 0px 8px;\n    padding: 2px 0px;\n    border-bottom: 1px solid #e1e2e2;\n    height: 90px;\n    display: flex;\n    .img {\n      flex: 0 0 90px;\n      margin-right: 18px;\n      // background-color: chocolate;\n      width: 90px;\n      height: 90px;\n      border-radius: 2px;\n      img {\n        width: 90px;\n        height: 90px;\n      }\n    }\n    ul {\n      flex: 1;\n      height: 90px;\n      margin-top: 4px;\n      li {\n        height: 27px;\n        line-height: 27px;\n        font-size: 12px;\n        color: #1b1b28;\n        overflow: hidden;\n      }\n    }\n  }\n  p{\n    text-align: center;\n    padding: 15px 0;\n    font-size: 14px;\n    color: #e1e2e2;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rank.vue?vue&type=template&id=2f482b10&\"\nimport script from \"./rank.vue?vue&type=script&lang=js&\"\nexport * from \"./rank.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rank.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}