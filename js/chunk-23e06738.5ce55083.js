(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23e06738"],{"00b4":function(e,t,a){"use strict";a("ac1f");var s=a("23e7"),o=a("da84"),n=a("c65b"),i=a("e330"),c=a("1626"),r=a("861d"),l=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),p=o.Error,d=i(/./.test);s({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=this.exec;if(!c(t))return d(this,e);var a=n(t,this,e);if(null!==a&&!r(a))throw new p("RegExp exec method returned something other than an Object or null");return!!a}})},bc6f:function(e,t,a){},e7ff:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mains"},[a("div",{staticClass:"login"},[a("div",{staticClass:"return"},[a("van-icon",{attrs:{name:"arrow-left"},on:{click:function(t){e.$router.push("/recommend").catch((function(){}))}}})],1),a("h1",[e._v("欢迎登录")]),a("div",{staticClass:"form"},[a("van-field",{directives:[{name:"show",rawName:"v-show",value:1==e.type,expression:"type == 1"}],staticClass:"item",attrs:{type:"tel",label:"手机号",placeholder:"请输入手机号码"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),a("van-field",{directives:[{name:"show",rawName:"v-show",value:1==e.type,expression:"type == 1"}],staticClass:"item",attrs:{type:"password",label:"密码",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("van-field",{directives:[{name:"show",rawName:"v-show",value:2==e.type,expression:"type == 2"}],staticClass:"item",attrs:{type:"mail",label:"邮箱",placeholder:"请输入邮箱"},model:{value:e.mail,callback:function(t){e.mail=t},expression:"mail"}}),a("van-field",{directives:[{name:"show",rawName:"v-show",value:2==e.type,expression:"type == 2"}],staticClass:"item",attrs:{type:"password",label:"密码",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("van-field",{directives:[{name:"show",rawName:"v-show",value:3==e.type,expression:"type == 3"}],staticClass:"item",attrs:{type:"text",label:"昵称",placeholder:"请输入昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),a("van-field",{directives:[{name:"show",rawName:"v-show",value:3==e.type,expression:"type == 3"}],staticClass:"item",attrs:{type:"tel",label:"手机号",placeholder:"请输入手机号码"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),a("van-field",{directives:[{name:"show",rawName:"v-show",value:3==e.type,expression:"type == 3"}],staticClass:"item",attrs:{type:"password",label:"密码",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("van-field",{directives:[{name:"show",rawName:"v-show",value:3==e.type,expression:"type == 3"}],staticClass:"item",attrs:{center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-button",{staticClass:"but",attrs:{size:"mini",type:"primary"},on:{click:e.getCode}},[e._v("发送")])]},proxy:!0}]),model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("div",{staticClass:"item"},[a("div",{staticClass:"submit",on:{click:e.submit}},[e._v("提交")])])],1),a("div",{staticClass:"type"},[a("p",{directives:[{name:"show",rawName:"v-show",value:1!=e.type,expression:"type != 1"}],on:{click:function(t){e.type=1}}},[e._v("手机号登入")]),a("p",{directives:[{name:"show",rawName:"v-show",value:2!=e.type,expression:"type != 2"}],on:{click:function(t){e.type=2}}},[e._v("邮箱登入")]),a("p",{directives:[{name:"show",rawName:"v-show",value:3!=e.type,expression:"type != 3"}],on:{click:function(t){e.type=3}}},[e._v("注册")])])])])},o=[],n=(a("ac1f"),a("00b4"),a("5530")),i=a("c1fb");function c(e){return Object(i["a"])({url:"/login/cellphone",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/captcha/sent",method:"get",params:e})}function l(e){return Object(i["a"])({url:"/login",method:"get",params:Object(n["a"])({},e)})}var p=a("d399"),d={data:function(){return{phone:"",password:"",code:"",mail:"",nickname:"",type:1}},methods:{getCode:function(){var e=/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9]|17[0|1|2|3|5|6|7|8|9])\d{8}$/;console.log(this.phone),e.test(this.phone)?r({phone:this.phone}).then((function(e){e.data?Object(p["a"])("验证码发送成功"):Object(p["a"])("验证码发送失败")})):Object(p["a"])("请输入正确手机号码")},submit:function(){var e=this;if(1==this.type){var t=/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9]|17[0|1|2|3|5|6|7|8|9])\d{8}$/;if(!t.test(this.phone))return void Object(p["a"])("请填写正确手机号码");var a=/^[a-zA-Z]\w{5,17}$/;if(!a.test(this.password))return void Object(p["a"])("请填写正确密码");c({phone:this.phone,password:this.password}).then((function(t){502!=t.code&&(Object(p["a"])("登陆成功"),window.localStorage.setItem("login",t.cookie),window.localStorage.setItem("token",t.token),window.localStorage.setItem("uid",t.account.id),e.$router.push("/recommend"))}))}else if(2==this.type){var s=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!s.test(this.mail))return void Object(p["a"])("请填写正确邮箱");var o=/^[a-zA-Z]\w{5,17}$/;if(!o.test(this.password))return void Object(p["a"])("请填写正确密码");l({email:this.mail,password:this.password}).then((function(t){502!=t.code&&(Object(p["a"])("登陆成功"),window.localStorage.setItem("login",t.cookie),window.localStorage.setItem("token",t.token),window.localStorage.setItem("uid",t.account.id),e.$router.push("/recommend"))}))}}}},u=d,h=(a("fc2d"),a("2877")),v=Object(h["a"])(u,s,o,!1,null,null,null);t["default"]=v.exports},fc2d:function(e,t,a){"use strict";a("bc6f")}}]);
//# sourceMappingURL=chunk-23e06738.5ce55083.js.map